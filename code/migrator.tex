\begin{lstlisting}[language=Java, caption={Migrator-klassen i DBUpgradinator}]
package vbb.dbupgradinator;

import java.lang.reflect.Constructor;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.StandardOpenOption;
import java.util.HashMap;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;

public class Migrator {
    private final AggregateTransformerLoader loader = new AggregateTransformerLoader();
    private final DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    private final String className;
    private final HashMap<String, AbstractAggregateTransformer> transformers = new HashMap<>(4, (float) 0.95);

    public Migrator() {
        this.className = "app.UserAggregateTransformer";
        this.aggregateTransformerReceiver();
    }

// Se kodelisting 4.3 til og med 4.8 for resten av kildekoden til Migrator
// ...

}
\end{lstlisting}
